{"id":"../../routers/review.js","dependencies":[{"name":"C:\\Users\\LeshaPC\\Desktop\\NodeJS\\Natours-API\\package.json","includedInParent":true,"mtime":1712416680966},{"name":"mongoose","loc":{"line":1,"column":25,"index":25},"parent":"C:\\Users\\LeshaPC\\Desktop\\NodeJS\\Natours-API\\routers\\review.js","resolved":"C:\\Users\\LeshaPC\\Desktop\\NodeJS\\Natours-API\\node_modules\\mongoose\\dist\\browser.umd.js"},{"name":"express","loc":{"line":2,"column":24,"index":63},"parent":"C:\\Users\\LeshaPC\\Desktop\\NodeJS\\Natours-API\\routers\\review.js","resolved":"C:\\Users\\LeshaPC\\Desktop\\NodeJS\\Natours-API\\node_modules\\express\\index.js"},{"name":"./../models/reviewModel","loc":{"line":3,"column":23,"index":99},"parent":"C:\\Users\\LeshaPC\\Desktop\\NodeJS\\Natours-API\\routers\\review.js","resolved":"C:\\Users\\LeshaPC\\Desktop\\NodeJS\\Natours-API\\models\\reviewModel.js"},{"name":"./../controllers/reviewControllers","loc":{"line":4,"column":34,"index":162},"parent":"C:\\Users\\LeshaPC\\Desktop\\NodeJS\\Natours-API\\routers\\review.js","resolved":"C:\\Users\\LeshaPC\\Desktop\\NodeJS\\Natours-API\\controllers\\reviewControllers.js"},{"name":"./../controllers/authController","loc":{"line":5,"column":32,"index":234},"parent":"C:\\Users\\LeshaPC\\Desktop\\NodeJS\\Natours-API\\routers\\review.js","resolved":"C:\\Users\\LeshaPC\\Desktop\\NodeJS\\Natours-API\\controllers\\authController.js"},{"name":"./../controllers/handlerFactory","loc":{"line":6,"column":31,"index":302},"parent":"C:\\Users\\LeshaPC\\Desktop\\NodeJS\\Natours-API\\routers\\review.js","resolved":"C:\\Users\\LeshaPC\\Desktop\\NodeJS\\Natours-API\\controllers\\handlerFactory.js"}],"generated":{"js":"var mongoose = require('mongoose');\nvar express = require('express');\nvar Review = require('./../models/reviewModel');\nvar reviewControllers = require('./../controllers/reviewControllers');\nvar authControllers = require('./../controllers/authController');\nvar handlerFactory = require('./../controllers/handlerFactory');\nvar review = express.Router({\n  mergeParams: true\n});\nreview.route('/').get(authControllers.protectRoute, reviewControllers.getReviews).post(authControllers.protectRoute, authControllers.isAuthorized('user', 'admin', 'guide', 'lead-guide'), reviewControllers.getUserIdAndTourId, reviewControllers.createReview);\nreview.route('/:id').get(handlerFactory.getOne(Review)).patch(authControllers.protectRoute, authControllers.isAuthorized('admin'), handlerFactory.changeOne(Review)).delete(authControllers.protectRoute, authControllers.isAuthorized('admin'), handlerFactory.deleteOne(Review));\nmodule.exports = review;"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":1,"column":0},"source":"../../routers/review.js","original":{"line":1,"column":0}},{"generated":{"line":1,"column":4},"source":"../../routers/review.js","original":{"line":1,"column":6},"name":"mongoose"},{"generated":{"line":1,"column":12},"source":"../../routers/review.js","original":{"line":1,"column":14}},{"generated":{"line":1,"column":15},"source":"../../routers/review.js","original":{"line":1,"column":17},"name":"require"},{"generated":{"line":1,"column":22},"source":"../../routers/review.js","original":{"line":1,"column":24}},{"generated":{"line":1,"column":23},"source":"../../routers/review.js","original":{"line":1,"column":25}},{"generated":{"line":1,"column":33},"source":"../../routers/review.js","original":{"line":1,"column":35}},{"generated":{"line":1,"column":34},"source":"../../routers/review.js","original":{"line":1,"column":36}},{"generated":{"line":2,"column":0},"source":"../../routers/review.js","original":{"line":2,"column":0}},{"generated":{"line":2,"column":4},"source":"../../routers/review.js","original":{"line":2,"column":6},"name":"express"},{"generated":{"line":2,"column":11},"source":"../../routers/review.js","original":{"line":2,"column":13}},{"generated":{"line":2,"column":14},"source":"../../routers/review.js","original":{"line":2,"column":16},"name":"require"},{"generated":{"line":2,"column":21},"source":"../../routers/review.js","original":{"line":2,"column":23}},{"generated":{"line":2,"column":22},"source":"../../routers/review.js","original":{"line":2,"column":24}},{"generated":{"line":2,"column":31},"source":"../../routers/review.js","original":{"line":2,"column":33}},{"generated":{"line":2,"column":32},"source":"../../routers/review.js","original":{"line":2,"column":34}},{"generated":{"line":3,"column":0},"source":"../../routers/review.js","original":{"line":3,"column":0}},{"generated":{"line":3,"column":4},"source":"../../routers/review.js","original":{"line":3,"column":6},"name":"Review"},{"generated":{"line":3,"column":10},"source":"../../routers/review.js","original":{"line":3,"column":12}},{"generated":{"line":3,"column":13},"source":"../../routers/review.js","original":{"line":3,"column":15},"name":"require"},{"generated":{"line":3,"column":20},"source":"../../routers/review.js","original":{"line":3,"column":22}},{"generated":{"line":3,"column":21},"source":"../../routers/review.js","original":{"line":3,"column":23}},{"generated":{"line":3,"column":46},"source":"../../routers/review.js","original":{"line":3,"column":48}},{"generated":{"line":3,"column":47},"source":"../../routers/review.js","original":{"line":3,"column":49}},{"generated":{"line":4,"column":0},"source":"../../routers/review.js","original":{"line":4,"column":0}},{"generated":{"line":4,"column":4},"source":"../../routers/review.js","original":{"line":4,"column":6},"name":"reviewControllers"},{"generated":{"line":4,"column":21},"source":"../../routers/review.js","original":{"line":4,"column":23}},{"generated":{"line":4,"column":24},"source":"../../routers/review.js","original":{"line":4,"column":26},"name":"require"},{"generated":{"line":4,"column":31},"source":"../../routers/review.js","original":{"line":4,"column":33}},{"generated":{"line":4,"column":32},"source":"../../routers/review.js","original":{"line":4,"column":34}},{"generated":{"line":4,"column":68},"source":"../../routers/review.js","original":{"line":4,"column":70}},{"generated":{"line":4,"column":69},"source":"../../routers/review.js","original":{"line":4,"column":71}},{"generated":{"line":5,"column":0},"source":"../../routers/review.js","original":{"line":5,"column":0}},{"generated":{"line":5,"column":4},"source":"../../routers/review.js","original":{"line":5,"column":6},"name":"authControllers"},{"generated":{"line":5,"column":19},"source":"../../routers/review.js","original":{"line":5,"column":21}},{"generated":{"line":5,"column":22},"source":"../../routers/review.js","original":{"line":5,"column":24},"name":"require"},{"generated":{"line":5,"column":29},"source":"../../routers/review.js","original":{"line":5,"column":31}},{"generated":{"line":5,"column":30},"source":"../../routers/review.js","original":{"line":5,"column":32}},{"generated":{"line":5,"column":63},"source":"../../routers/review.js","original":{"line":5,"column":65}},{"generated":{"line":5,"column":64},"source":"../../routers/review.js","original":{"line":5,"column":66}},{"generated":{"line":6,"column":0},"source":"../../routers/review.js","original":{"line":6,"column":0}},{"generated":{"line":6,"column":4},"source":"../../routers/review.js","original":{"line":6,"column":6},"name":"handlerFactory"},{"generated":{"line":6,"column":18},"source":"../../routers/review.js","original":{"line":6,"column":20}},{"generated":{"line":6,"column":21},"source":"../../routers/review.js","original":{"line":6,"column":23},"name":"require"},{"generated":{"line":6,"column":28},"source":"../../routers/review.js","original":{"line":6,"column":30}},{"generated":{"line":6,"column":29},"source":"../../routers/review.js","original":{"line":6,"column":31}},{"generated":{"line":6,"column":62},"source":"../../routers/review.js","original":{"line":6,"column":64}},{"generated":{"line":6,"column":63},"source":"../../routers/review.js","original":{"line":6,"column":65}},{"generated":{"line":7,"column":0},"source":"../../routers/review.js","original":{"line":8,"column":0}},{"generated":{"line":7,"column":4},"source":"../../routers/review.js","original":{"line":8,"column":6},"name":"review"},{"generated":{"line":7,"column":10},"source":"../../routers/review.js","original":{"line":8,"column":12}},{"generated":{"line":7,"column":13},"source":"../../routers/review.js","original":{"line":8,"column":15},"name":"express"},{"generated":{"line":7,"column":20},"source":"../../routers/review.js","original":{"line":8,"column":22}},{"generated":{"line":7,"column":21},"source":"../../routers/review.js","original":{"line":8,"column":23},"name":"Router"},{"generated":{"line":7,"column":27},"source":"../../routers/review.js","original":{"line":8,"column":29}},{"generated":{"line":7,"column":28},"source":"../../routers/review.js","original":{"line":8,"column":30}},{"generated":{"line":8,"column":2},"source":"../../routers/review.js","original":{"line":8,"column":32},"name":"mergeParams"},{"generated":{"line":8,"column":13},"source":"../../routers/review.js","original":{"line":8,"column":43}},{"generated":{"line":8,"column":15},"source":"../../routers/review.js","original":{"line":8,"column":45}},{"generated":{"line":9,"column":0},"source":"../../routers/review.js","original":{"line":8,"column":50}},{"generated":{"line":9,"column":1},"source":"../../routers/review.js","original":{"line":8,"column":51}},{"generated":{"line":9,"column":2},"source":"../../routers/review.js","original":{"line":8,"column":52}},{"generated":{"line":10,"column":0},"source":"../../routers/review.js","original":{"line":10,"column":0},"name":"review"},{"generated":{"line":10,"column":6},"source":"../../routers/review.js","original":{"line":10,"column":6}},{"generated":{"line":10,"column":7},"source":"../../routers/review.js","original":{"line":11,"column":3},"name":"route"},{"generated":{"line":10,"column":12},"source":"../../routers/review.js","original":{"line":11,"column":8}},{"generated":{"line":10,"column":13},"source":"../../routers/review.js","original":{"line":11,"column":9}},{"generated":{"line":10,"column":16},"source":"../../routers/review.js","original":{"line":11,"column":12}},{"generated":{"line":10,"column":17},"source":"../../routers/review.js","original":{"line":11,"column":13}},{"generated":{"line":10,"column":18},"source":"../../routers/review.js","original":{"line":12,"column":3},"name":"get"},{"generated":{"line":10,"column":21},"source":"../../routers/review.js","original":{"line":12,"column":6}},{"generated":{"line":10,"column":22},"source":"../../routers/review.js","original":{"line":12,"column":7},"name":"authControllers"},{"generated":{"line":10,"column":37},"source":"../../routers/review.js","original":{"line":12,"column":22}},{"generated":{"line":10,"column":38},"source":"../../routers/review.js","original":{"line":12,"column":23},"name":"protectRoute"},{"generated":{"line":10,"column":50},"source":"../../routers/review.js","original":{"line":12,"column":35}},{"generated":{"line":10,"column":52},"source":"../../routers/review.js","original":{"line":12,"column":37},"name":"reviewControllers"},{"generated":{"line":10,"column":69},"source":"../../routers/review.js","original":{"line":12,"column":54}},{"generated":{"line":10,"column":70},"source":"../../routers/review.js","original":{"line":12,"column":55},"name":"getReviews"},{"generated":{"line":10,"column":80},"source":"../../routers/review.js","original":{"line":12,"column":65}},{"generated":{"line":10,"column":81},"source":"../../routers/review.js","original":{"line":12,"column":66}},{"generated":{"line":10,"column":82},"source":"../../routers/review.js","original":{"line":13,"column":3},"name":"post"},{"generated":{"line":10,"column":86},"source":"../../routers/review.js","original":{"line":13,"column":7}},{"generated":{"line":10,"column":87},"source":"../../routers/review.js","original":{"line":14,"column":4},"name":"authControllers"},{"generated":{"line":10,"column":102},"source":"../../routers/review.js","original":{"line":14,"column":19}},{"generated":{"line":10,"column":103},"source":"../../routers/review.js","original":{"line":14,"column":20},"name":"protectRoute"},{"generated":{"line":10,"column":115},"source":"../../routers/review.js","original":{"line":14,"column":32}},{"generated":{"line":10,"column":117},"source":"../../routers/review.js","original":{"line":15,"column":4},"name":"authControllers"},{"generated":{"line":10,"column":132},"source":"../../routers/review.js","original":{"line":15,"column":19}},{"generated":{"line":10,"column":133},"source":"../../routers/review.js","original":{"line":15,"column":20},"name":"isAuthorized"},{"generated":{"line":10,"column":145},"source":"../../routers/review.js","original":{"line":15,"column":32}},{"generated":{"line":10,"column":146},"source":"../../routers/review.js","original":{"line":15,"column":33}},{"generated":{"line":10,"column":152},"source":"../../routers/review.js","original":{"line":15,"column":39}},{"generated":{"line":10,"column":154},"source":"../../routers/review.js","original":{"line":15,"column":41}},{"generated":{"line":10,"column":161},"source":"../../routers/review.js","original":{"line":15,"column":48}},{"generated":{"line":10,"column":163},"source":"../../routers/review.js","original":{"line":15,"column":50}},{"generated":{"line":10,"column":170},"source":"../../routers/review.js","original":{"line":15,"column":57}},{"generated":{"line":10,"column":172},"source":"../../routers/review.js","original":{"line":15,"column":59}},{"generated":{"line":10,"column":184},"source":"../../routers/review.js","original":{"line":15,"column":71}},{"generated":{"line":10,"column":185},"source":"../../routers/review.js","original":{"line":15,"column":72}},{"generated":{"line":10,"column":187},"source":"../../routers/review.js","original":{"line":16,"column":4},"name":"reviewControllers"},{"generated":{"line":10,"column":204},"source":"../../routers/review.js","original":{"line":16,"column":21}},{"generated":{"line":10,"column":205},"source":"../../routers/review.js","original":{"line":16,"column":22},"name":"getUserIdAndTourId"},{"generated":{"line":10,"column":223},"source":"../../routers/review.js","original":{"line":16,"column":40}},{"generated":{"line":10,"column":225},"source":"../../routers/review.js","original":{"line":17,"column":4},"name":"reviewControllers"},{"generated":{"line":10,"column":242},"source":"../../routers/review.js","original":{"line":17,"column":21}},{"generated":{"line":10,"column":243},"source":"../../routers/review.js","original":{"line":17,"column":22},"name":"createReview"},{"generated":{"line":10,"column":255},"source":"../../routers/review.js","original":{"line":18,"column":2}},{"generated":{"line":10,"column":256},"source":"../../routers/review.js","original":{"line":18,"column":3}},{"generated":{"line":11,"column":0},"source":"../../routers/review.js","original":{"line":20,"column":0},"name":"review"},{"generated":{"line":11,"column":6},"source":"../../routers/review.js","original":{"line":20,"column":6}},{"generated":{"line":11,"column":7},"source":"../../routers/review.js","original":{"line":21,"column":3},"name":"route"},{"generated":{"line":11,"column":12},"source":"../../routers/review.js","original":{"line":21,"column":8}},{"generated":{"line":11,"column":13},"source":"../../routers/review.js","original":{"line":21,"column":9}},{"generated":{"line":11,"column":19},"source":"../../routers/review.js","original":{"line":21,"column":15}},{"generated":{"line":11,"column":20},"source":"../../routers/review.js","original":{"line":21,"column":16}},{"generated":{"line":11,"column":21},"source":"../../routers/review.js","original":{"line":22,"column":3},"name":"get"},{"generated":{"line":11,"column":24},"source":"../../routers/review.js","original":{"line":22,"column":6}},{"generated":{"line":11,"column":25},"source":"../../routers/review.js","original":{"line":22,"column":7},"name":"handlerFactory"},{"generated":{"line":11,"column":39},"source":"../../routers/review.js","original":{"line":22,"column":21}},{"generated":{"line":11,"column":40},"source":"../../routers/review.js","original":{"line":22,"column":22},"name":"getOne"},{"generated":{"line":11,"column":46},"source":"../../routers/review.js","original":{"line":22,"column":28}},{"generated":{"line":11,"column":47},"source":"../../routers/review.js","original":{"line":22,"column":29},"name":"Review"},{"generated":{"line":11,"column":53},"source":"../../routers/review.js","original":{"line":22,"column":35}},{"generated":{"line":11,"column":54},"source":"../../routers/review.js","original":{"line":22,"column":36}},{"generated":{"line":11,"column":55},"source":"../../routers/review.js","original":{"line":22,"column":37}},{"generated":{"line":11,"column":56},"source":"../../routers/review.js","original":{"line":23,"column":3},"name":"patch"},{"generated":{"line":11,"column":61},"source":"../../routers/review.js","original":{"line":23,"column":8}},{"generated":{"line":11,"column":62},"source":"../../routers/review.js","original":{"line":24,"column":4},"name":"authControllers"},{"generated":{"line":11,"column":77},"source":"../../routers/review.js","original":{"line":24,"column":19}},{"generated":{"line":11,"column":78},"source":"../../routers/review.js","original":{"line":24,"column":20},"name":"protectRoute"},{"generated":{"line":11,"column":90},"source":"../../routers/review.js","original":{"line":24,"column":32}},{"generated":{"line":11,"column":92},"source":"../../routers/review.js","original":{"line":25,"column":4},"name":"authControllers"},{"generated":{"line":11,"column":107},"source":"../../routers/review.js","original":{"line":25,"column":19}},{"generated":{"line":11,"column":108},"source":"../../routers/review.js","original":{"line":25,"column":20},"name":"isAuthorized"},{"generated":{"line":11,"column":120},"source":"../../routers/review.js","original":{"line":25,"column":32}},{"generated":{"line":11,"column":121},"source":"../../routers/review.js","original":{"line":25,"column":33}},{"generated":{"line":11,"column":128},"source":"../../routers/review.js","original":{"line":25,"column":40}},{"generated":{"line":11,"column":129},"source":"../../routers/review.js","original":{"line":25,"column":41}},{"generated":{"line":11,"column":131},"source":"../../routers/review.js","original":{"line":26,"column":4},"name":"handlerFactory"},{"generated":{"line":11,"column":145},"source":"../../routers/review.js","original":{"line":26,"column":18}},{"generated":{"line":11,"column":146},"source":"../../routers/review.js","original":{"line":26,"column":19},"name":"changeOne"},{"generated":{"line":11,"column":155},"source":"../../routers/review.js","original":{"line":26,"column":28}},{"generated":{"line":11,"column":156},"source":"../../routers/review.js","original":{"line":26,"column":29},"name":"Review"},{"generated":{"line":11,"column":162},"source":"../../routers/review.js","original":{"line":26,"column":35}},{"generated":{"line":11,"column":163},"source":"../../routers/review.js","original":{"line":27,"column":2}},{"generated":{"line":11,"column":164},"source":"../../routers/review.js","original":{"line":27,"column":3}},{"generated":{"line":11,"column":165},"source":"../../routers/review.js","original":{"line":28,"column":3},"name":"delete"},{"generated":{"line":11,"column":171},"source":"../../routers/review.js","original":{"line":28,"column":9}},{"generated":{"line":11,"column":172},"source":"../../routers/review.js","original":{"line":29,"column":4},"name":"authControllers"},{"generated":{"line":11,"column":187},"source":"../../routers/review.js","original":{"line":29,"column":19}},{"generated":{"line":11,"column":188},"source":"../../routers/review.js","original":{"line":29,"column":20},"name":"protectRoute"},{"generated":{"line":11,"column":200},"source":"../../routers/review.js","original":{"line":29,"column":32}},{"generated":{"line":11,"column":202},"source":"../../routers/review.js","original":{"line":30,"column":4},"name":"authControllers"},{"generated":{"line":11,"column":217},"source":"../../routers/review.js","original":{"line":30,"column":19}},{"generated":{"line":11,"column":218},"source":"../../routers/review.js","original":{"line":30,"column":20},"name":"isAuthorized"},{"generated":{"line":11,"column":230},"source":"../../routers/review.js","original":{"line":30,"column":32}},{"generated":{"line":11,"column":231},"source":"../../routers/review.js","original":{"line":30,"column":33}},{"generated":{"line":11,"column":238},"source":"../../routers/review.js","original":{"line":30,"column":40}},{"generated":{"line":11,"column":239},"source":"../../routers/review.js","original":{"line":30,"column":41}},{"generated":{"line":11,"column":241},"source":"../../routers/review.js","original":{"line":31,"column":4},"name":"handlerFactory"},{"generated":{"line":11,"column":255},"source":"../../routers/review.js","original":{"line":31,"column":18}},{"generated":{"line":11,"column":256},"source":"../../routers/review.js","original":{"line":31,"column":19},"name":"deleteOne"},{"generated":{"line":11,"column":265},"source":"../../routers/review.js","original":{"line":31,"column":28}},{"generated":{"line":11,"column":266},"source":"../../routers/review.js","original":{"line":31,"column":29},"name":"Review"},{"generated":{"line":11,"column":272},"source":"../../routers/review.js","original":{"line":31,"column":35}},{"generated":{"line":11,"column":273},"source":"../../routers/review.js","original":{"line":32,"column":2}},{"generated":{"line":11,"column":274},"source":"../../routers/review.js","original":{"line":32,"column":3}},{"generated":{"line":12,"column":0},"source":"../../routers/review.js","original":{"line":34,"column":0},"name":"module"},{"generated":{"line":12,"column":6},"source":"../../routers/review.js","original":{"line":34,"column":6}},{"generated":{"line":12,"column":7},"source":"../../routers/review.js","original":{"line":34,"column":7},"name":"exports"},{"generated":{"line":12,"column":14},"source":"../../routers/review.js","original":{"line":34,"column":14}},{"generated":{"line":12,"column":17},"source":"../../routers/review.js","original":{"line":34,"column":17},"name":"review"},{"generated":{"line":12,"column":23},"source":"../../routers/review.js","original":{"line":34,"column":23}}],"sources":{"../../routers/review.js":"const mongoose = require('mongoose');\r\nconst express = require('express');\r\nconst Review = require('./../models/reviewModel');\r\nconst reviewControllers = require('./../controllers/reviewControllers');\r\nconst authControllers = require('./../controllers/authController');\r\nconst handlerFactory = require('./../controllers/handlerFactory');\r\n\r\nconst review = express.Router({ mergeParams: true });\r\n\r\nreview\r\n  .route('/')\r\n  .get(authControllers.protectRoute, reviewControllers.getReviews)\r\n  .post(\r\n    authControllers.protectRoute,\r\n    authControllers.isAuthorized('user', 'admin', 'guide', 'lead-guide'),\r\n    reviewControllers.getUserIdAndTourId,\r\n    reviewControllers.createReview\r\n  );\r\n\r\nreview\r\n  .route('/:id')\r\n  .get(handlerFactory.getOne(Review))\r\n  .patch(\r\n    authControllers.protectRoute,\r\n    authControllers.isAuthorized('admin'),\r\n    handlerFactory.changeOne(Review)\r\n  )\r\n  .delete(\r\n    authControllers.protectRoute,\r\n    authControllers.isAuthorized('admin'),\r\n    handlerFactory.deleteOne(Review)\r\n  );\r\n\r\nmodule.exports = review;\r\n"},"lineCount":null}},"error":null,"hash":"890ab512211d011104a9adfac0da00ed","cacheData":{"env":{}}}